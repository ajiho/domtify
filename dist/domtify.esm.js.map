{"version":3,"file":"domtify.esm.js","sources":["../src/utils/index.js","../src/core.js","../src/ext/each.js","../src/ext/addClass.js","../src/ext/map.js","../src/ext/filter.js","../src/ext/eq.js","../src/ext/first.js","../src/ext/last.js","../src/ext/get.js","../src/utils/flatArgs.js","../src/utils/domManip.js","../src/ext/append.js","../src/ext/extend.js","../src/ext/clone.js","../src/ext/add.js","../src/ext/prepend.js","../src/ext/after.js","../src/ext/before.js","../src/ext/replaceWith.js"],"sourcesContent":["const isElem = (el) => el instanceof Element\r\n\r\n//用于判断一个对象是否是纯粹的 JavaScript 对象（即不是 DOM 对象、函数、数组等）。具体作用是检查对象是否通过对象字面量或 new Object() 创建，且其原型链上只包含标准的 Object 原型\r\nconst isPlainObject = (obj) => {\r\n  if (typeof obj !== 'object' || obj === null || obj instanceof Array) {\r\n    return false\r\n  }\r\n  const prototype = Object.getPrototypeOf(obj)\r\n  return prototype === Object.prototype || prototype === null\r\n}\r\n\r\nconst isString = (value) => {\r\n  return typeof value === 'string'\r\n}\r\n\r\nconst isHtmlString = (str) => {\r\n  return str.trim().startsWith('<')\r\n}\r\n\r\nconst isFunction = (value) => {\r\n  return typeof value === 'function'\r\n}\r\n\r\nconst isArray = (value) => {\r\n  return Array.isArray(value)\r\n}\r\n\r\nconst isInstance = (obj, cls) => {\r\n  return obj instanceof cls\r\n}\r\n\r\nconst arrUnique = (arr) => [...new Set(arr)]\r\n\r\nconst isInPage = (node) => {\r\n  return node === document.body ? false : document.body.contains(node)\r\n}\r\n\r\nexport {\r\n  isInPage,\r\n  isArray,\r\n  arrUnique,\r\n  isInstance,\r\n  isFunction,\r\n  isString,\r\n  isHtmlString,\r\n  isElem,\r\n  isPlainObject,\r\n}\r\n","import { isString, isHtmlString, isInstance } from './utils'\r\n\r\nclass Domtify {\r\n  result = []\r\n\r\n  get length() {\r\n    return this.result.length\r\n  }\r\n\r\n  constructor(selector, context) {\r\n    // 如果已经是实例，无需处理直接返回\r\n    if (selector instanceof Domtify) {\r\n      return selector\r\n    }\r\n    // 字符串处理\r\n    else if (isString(selector)) {\r\n      if (isHtmlString(selector)) {\r\n        //html字符串就直接创建\r\n        const div = document.createElement('div')\r\n        div.insertAdjacentHTML('beforeend', selector)\r\n        this.result = [div.firstChild]\r\n      } else {\r\n        //选择器字符串\r\n        this.result = Array.from(\r\n          (context || document).querySelectorAll(selector),\r\n        )\r\n      }\r\n    } else if (\r\n      isInstance(selector, NodeList) ||\r\n      isInstance(selector, HTMLCollection)\r\n    ) {\r\n      //是直接传递的NodeList或者HTMLCollection集合\r\n      this.result = Array.from(selector)\r\n    } else if (Array.isArray(selector)) {\r\n      //是数组直接替换\r\n      this.result = selector\r\n    } else {\r\n      this.result = selector ? [selector] : []\r\n    }\r\n  }\r\n}\r\n\r\n//类的原型\r\nconst fn = Domtify.prototype\r\n\r\n//构造函数domtify\r\nconst domtify = (selector, context) => new Domtify(selector, context)\r\n\r\n//把类原型赋值给构造函数的原型，最后再赋值给构造函数domtify的fn属性，在js中，函数也是一种特殊的对象，因此也可以拥有属性。\r\ndomtify.fn = domtify.prototype = fn\r\n\r\nexport { domtify, domtify as d, fn, Domtify }\r\n","import { fn } from '../core'\r\n\r\nfn.each = function (callback) {\r\n  this.result.forEach(function (element, index, array) {\r\n    callback.call(element, element, index, array)\r\n  })\r\n  return this\r\n}\r\n","import { fn } from '../core'\r\nimport { isArray, isFunction, isString, isElem } from '../utils'\r\n\r\nimport './each'\r\n\r\nfn.addClass = function (className) {\r\n  const list = (res) =>\r\n    isArray(res) ? res : isString(res) ? res.split(' ') : []\r\n\r\n  let classList = []\r\n\r\n  return this.each((item, index) => {\r\n    // 处理函数返回值\r\n    if (isFunction(className)) {\r\n      classList = list(\r\n        className.call(item, index, isElem(item) ? item.classList.value : item),\r\n      )\r\n    } else {\r\n      classList = list(className)\r\n    }\r\n\r\n    item?.classList?.add(...classList)\r\n  })\r\n}\r\n","import { fn } from '../core'\r\n\r\nfn.map = function (callback) {\r\n  this.result = this.result.map((element, index, array) =>\r\n    callback.call(element, element, index, array),\r\n  )\r\n  return this\r\n}\r\n","import { fn, domtify } from '../core'\r\n\r\nfn.filter = function (selector) {\r\n  //默认是选择器\r\n  let callbackFn = (item) => item?.matches(selector || '*')\r\n\r\n  //函数\r\n  if (typeof selector === 'function') callbackFn = selector\r\n\r\n  //domtify实例\r\n  if (selector instanceof domtify) {\r\n    callbackFn = (item) => selector.result.indexOf(item) !== -1\r\n  }\r\n\r\n  //调用数组原生的filter过滤\r\n  this.result = this.result.filter((item, index, array) =>\r\n    callbackFn.call(item, item, index, array),\r\n  )\r\n\r\n  return this\r\n}\r\n","import { fn } from '../core'\r\n\r\nfn.eq = function (index) {\r\n  this.result = [this.result.at(index)]\r\n  return this\r\n}\r\n","import { fn } from '../core'\r\n\r\nimport './eq'\r\n\r\nfn.first = function () {\r\n  return this.eq(0)\r\n}\r\n","import { fn } from '../core'\r\nimport './eq'\r\n\r\nfn.last = function () {\r\n  return this.eq(-1)\r\n}\r\n","import { fn } from '../core'\r\n\r\nfn.get = function (index) {\r\n  return Number.isInteger(index) ? this.result.at(index) : this.result\r\n}\r\n","import { Domtify } from '../core'\r\n\r\nconst flatArgs = (args) => {\r\n  const uniqueMap = new Map()\r\n  return (Array.isArray(args) ? args : [args])\r\n    .flat(Infinity)\r\n    .flatMap((item) => {\r\n      if (item instanceof Domtify) {\r\n        return item.result\r\n      }\r\n      if (item instanceof NodeList || item instanceof HTMLCollection) {\r\n        return Array.from(item)\r\n      }\r\n      return item\r\n    })\r\n    .filter((item) => {\r\n      if (item instanceof Element) {\r\n        //不允许重复的Element\r\n        if (!uniqueMap.has(item)) {\r\n          uniqueMap.set(item, true)\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      }\r\n      if (item === null || typeof item === 'number') {\r\n        //null也删除\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n}\r\n\r\nexport default flatArgs\r\n","import {\r\n    isString,\r\n    isHtmlString,\r\n    isFunction,\r\n    isElem,\r\n} from '../utils'\r\n\r\nimport flatArgs from '../utils/flatArgs'\r\nimport '../ext/each'\r\n\r\nexport function domManip(collection, args, callback, reverse) {\r\n\r\n    //参数静态化不过不这样的话，如果是HTMLCollection如果动态添加后，在遍历的时候它数组长度会改变，遍历逻辑会错乱\r\n    let firstParam = args[0]\r\n    let firstParamIsFunction = isFunction(firstParam)\r\n    let fnResult = {}\r\n\r\n    if (firstParamIsFunction) {\r\n        collection.each((item, index) => {\r\n            fnResult[index] = flatArgs(firstParam.call(item, index, item.textContent))\r\n        })\r\n    }\r\n    Object.freeze(fnResult) //冻结该对象防止被更改\r\n\r\n\r\n    let collectiona = flatArgs(args)\r\n    if(reverse===true){\r\n        collectiona = collectiona.reverse()\r\n    }\r\n\r\n\r\n    let last = false\r\n    return collection.each((elem, index) => {\r\n        if (firstParamIsFunction) {\r\n            collectiona = fnResult[index]\r\n            if(reverse===true){\r\n                collectiona = collectiona.reverse()\r\n            }\r\n        }\r\n\r\n\r\n\r\n        last = index === collection.length - 1 ? true : false\r\n        collectiona.forEach((item) => {\r\n\r\n            let temp;\r\n            //1.字符串\r\n            if (isString(item)) {\r\n                if (isHtmlString(item)) {//htmlString\r\n\r\n                    const tempElement = document.createElement('div')\r\n                    tempElement.innerHTML = item\r\n                    temp = tempElement.firstElementChild\r\n\r\n                } else {//textNode\r\n                    temp = document.createTextNode(item)\r\n                }\r\n            } else if (isElem(item) || item instanceof Text) {\r\n                //元素\r\n                if (last === true) {\r\n                    temp = item;\r\n                } else {\r\n                    temp = item.cloneNode(true)\r\n                }\r\n            }\r\n\r\n            //调用方法\r\n            callback.call(collectiona, elem, temp)\r\n\r\n        })\r\n    })\r\n\r\n}","import { fn } from '../core'\r\nimport { domManip } from '../utils/domManip'\r\n\r\nfn.append = function (...args) {\r\n\r\n  return domManip(this, args, function (elem, temp) {\r\n    elem.appendChild(temp)\r\n\r\n  }, false)\r\n\r\n}\r\n\r\n\r\n","import { domtify } from '../core'\r\n\r\nimport { isPlainObject } from '../utils'\r\n\r\ndomtify.extend = function () {\r\n  let options,\r\n    name,\r\n    src,\r\n    copy,\r\n    copyIsArray,\r\n    clone,\r\n    target = arguments[0] || {}, //第一个参数\r\n    i = 1,\r\n    length = arguments.length,\r\n    deep = false\r\n\r\n  // 处理深度复制情况\r\n  if (typeof target === 'boolean') {\r\n    deep = target\r\n\r\n    // 跳过布尔值和目标\r\n    target = arguments[i] || {}\r\n    i++\r\n  }\r\n\r\n  // 当目标是字符串或其他东西时处理大小写（可能在深度复制中）\r\n  if (typeof target !== 'object' && typeof target !== 'function') {\r\n    target = {}\r\n  }\r\n\r\n  // 如果只传递一个参数，则扩展jQuery本身\r\n  if (i === length) {\r\n    target = this\r\n    i--\r\n  }\r\n\r\n  for (; i < length; i++) {\r\n    // 仅处理非null/未定义的值\r\n    if ((options = arguments[i]) != null) {\r\n      // 延伸基础对象\r\n      for (name in options) {\r\n        copy = options[name]\r\n        // 防止Object.prototype污染\r\n        // 防止无休止的循环\r\n        if (name === '__proto__' || target === copy) {\r\n          continue\r\n        }\r\n\r\n        // 如果我们正在合并普通对象或数组，则重复出现\r\n        if (\r\n          deep &&\r\n          copy &&\r\n          (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))\r\n        ) {\r\n          src = target[name]\r\n\r\n          // 确保源值的类型正确\r\n          if (copyIsArray && !Array.isArray(src)) {\r\n            clone = []\r\n          } else if (!copyIsArray && !isPlainObject(src)) {\r\n            clone = {}\r\n          } else {\r\n            clone = src\r\n          }\r\n          copyIsArray = false\r\n\r\n          // 从不移动原始对象，而是克隆它们\r\n          target[name] = this.extend(deep, clone, copy)\r\n\r\n          // 不要引入未定义的值\r\n          // } else if (copy !== undefined) {\r\n        } else {\r\n          target[name] = copy\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // 返回修改后的对象\r\n  return target\r\n}\r\n","import { fn } from '../core'\r\nimport './each'\r\n\r\nfn.clone = function (deep = false) {\r\n  return this.map((item) => item?.cloneNode(deep))\r\n}\r\n","import { fn, domtify } from '../core'\r\nimport { arrUnique } from '../utils'\r\nimport './each'\r\nimport './get'\r\n\r\nfn.add = function (selector, context) {\r\n  return domtify(\r\n    arrUnique([...this.get(), ...domtify(selector, context).get()]),\r\n  )\r\n}\r\n","import { fn } from '../core'\r\n\r\nimport { domManip } from '../utils/domManip'\r\n\r\n\r\n\r\nfn.prepend = function (...args) {\r\n\r\n  return domManip(this, args, function (elem, temp) {\r\n    // console.log(elem, temp);\r\n\r\n    elem.insertBefore(temp, elem.firstChild)\r\n\r\n  },true)\r\n}\r\n","import { fn } from '../core'\r\nimport { domManip } from '../utils/domManip'\r\n\r\nfn.after = function (...args) {\r\n\r\n    return domManip(this, args, function (elem, temp) {\r\n\r\n        if (elem.parentNode) {\r\n            elem.parentNode.insertBefore(temp, elem.nextSibling);\r\n        }\r\n\r\n    }, true)\r\n\r\n}\r\n\r\n\r\n","import { fn } from '../core'\r\nimport { domManip } from '../utils/domManip'\r\n\r\nfn.before = function (...args) {\r\n\r\n    return domManip(this, args, function (elem, temp) {\r\n\r\n        if ( elem.parentNode ) {\r\n            elem.parentNode.insertBefore( temp, elem );\r\n        }\r\n\r\n    }, true)\r\n\r\n}\r\n\r\n\r\n","import { fn } from '../core'\r\nimport { domManip } from '../utils/domManip'\r\n\r\nfn.replaceWith = function (...args) {\r\n\r\n    return domManip(this, args, function (elem, temp) {\r\n\r\n        const parent = elem.parentNode;\r\n\r\n        if ( parent ) {\r\n            parent.replaceChild( temp, elem );\r\n        }\r\n\r\n    }, true)\r\n\r\n}\r\n\r\n\r\n"],"names":["isElem","el","Element","isPlainObject","obj","Array","prototype","Object","getPrototypeOf","isString","value","isHtmlString","str","trim","startsWith","isFunction","isArray","isInstance","cls","arrUnique","arr","Set","Domtify","length","result","constructor","selector","context","div","document","createElement","insertAdjacentHTML","firstChild","from","querySelectorAll","NodeList","HTMLCollection","fn","domtify","each","callback","forEach","element","index","array","call","addClass","className","list","res","split","classList","item","_item$classList","add","map","filter","callbackFn","matches","indexOf","eq","at","first","last","get","Number","isInteger","flatArgs","args","uniqueMap","Map","flat","Infinity","flatMap","has","set","domManip","collection","reverse","firstParam","firstParamIsFunction","fnResult","textContent","freeze","collectiona","elem","temp","tempElement","innerHTML","firstElementChild","createTextNode","Text","cloneNode","append","appendChild","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","deep","prepend","insertBefore","after","parentNode","nextSibling","before","replaceWith","parent","replaceChild"],"mappings":"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"}