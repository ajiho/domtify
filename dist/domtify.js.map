{"version":3,"file":"domtify.js","sources":["../src/utils/index.js","../src/core.js","../src/ext/each.js","../src/ext/addClass.js","../src/ext/map.js","../src/ext/filter.js","../src/ext/eq.js","../src/ext/first.js","../src/ext/last.js","../src/ext/get.js","../src/utils/flatArgs.js","../src/ext/append.js","../src/ext/extend.js","../src/ext/clone.js","../src/ext/add.js"],"sourcesContent":["\r\n\r\nconst isElem = el => el instanceof Element;\r\n\r\n\r\n//用于判断一个对象是否是纯粹的 JavaScript 对象（即不是 DOM 对象、函数、数组等）。具体作用是检查对象是否通过对象字面量或 new Object() 创建，且其原型链上只包含标准的 Object 原型\r\nconst isPlainObject = (obj) => {\r\n    if (typeof obj !== 'object' || obj === null || obj instanceof Array) {\r\n        return false\r\n    }\r\n    const prototype = Object.getPrototypeOf(obj)\r\n    return prototype === Object.prototype || prototype === null\r\n}\r\n\r\n\r\nconst isString = (value) => {\r\n    return typeof value === 'string';\r\n}\r\n\r\n\r\nconst isHtmlString = (str) => {\r\n    return str.trim().startsWith('<')\r\n}\r\n\r\nconst isFunction = (value) => {\r\n    return typeof value === 'function';\r\n}\r\n\r\n\r\nconst isArray = (value) => {\r\n    return Array.isArray(value)\r\n}\r\n\r\nconst isInstance = (obj, cls) => {\r\n    return obj instanceof cls;\r\n}\r\n\r\n\r\nconst arrUnique = (arr) => [...new Set(arr)];\r\n\r\n\r\n\r\nconst isInPage = (node) => {\r\n    return (node === document.body) ? false : document.body.contains(node);\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport {\r\n    isInPage,\r\n    isArray,\r\n    arrUnique,\r\n    isInstance,\r\n    isFunction,\r\n    isString,\r\n    isHtmlString,\r\n    isElem,\r\n    isPlainObject\r\n}\r\n","import { isString, isHtmlString, isInstance } from \"./utils\";\r\n\r\n\r\n\r\nclass Domtify {\r\n\r\n    result = []\r\n\r\n    get length() {\r\n        return this.result.length\r\n    }\r\n\r\n    constructor(selector, context) {\r\n        // 如果已经是实例，无需处理直接返回\r\n        if (selector instanceof Domtify) {\r\n            return selector;\r\n        }\r\n        // 字符串处理\r\n        else if (isString(selector)) {\r\n\r\n            if (isHtmlString(selector)) {//html字符串就直接创建\r\n                const div = document.createElement('div');\r\n                div.insertAdjacentHTML('beforeend', selector)\r\n                this.result = [div.firstChild]\r\n            } else {//选择器字符串\r\n                this.result = Array.from((context || document).querySelectorAll(selector));\r\n            }\r\n        }\r\n        else if (isInstance(selector, NodeList) || isInstance(selector, HTMLCollection)) {//是直接传递的NodeList或者HTMLCollection集合\r\n            this.result = Array.from(selector)\r\n        }\r\n\r\n        else if (Array.isArray(selector)) {//是数组直接替换\r\n            this.result = selector\r\n        } else {\r\n            this.result = selector ? [selector] : []\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n//类的原型\r\nconst fn = Domtify.prototype\r\n\r\n\r\n\r\n//构造函数domtify\r\nconst domtify = (selector, context) => new Domtify(selector, context)\r\n\r\n\r\n//把类原型赋值给构造函数的原型，最后再赋值给构造函数domtify的fn属性，在js中，函数也是一种特殊的对象，因此也可以拥有属性。\r\ndomtify.fn = domtify.prototype = fn\r\n\r\n\r\nexport { domtify, domtify as d, fn, Domtify }\r\n","import { fn } from \"../core\";\r\n\r\n\r\nfn.each = function (callback) {\r\n    this.result.forEach(function (element, index, array) {\r\n        callback.call(element, element, index, array)\r\n    })\r\n    return this;\r\n}\r\n\r\n\r\n","import { fn } from \"../core\";\r\nimport { isArray, isFunction, isString, isElem } from \"../utils\";\r\n\r\nimport './each'\r\n\r\n\r\nfn.addClass = function (className) {\r\n\r\n\r\n    const list = (res) => isArray(res) ? res : isString(res) ? res.split(\" \") : [];\r\n\r\n    let classList = [];\r\n\r\n    return this.each((item, index) => {\r\n\r\n        // 处理函数返回值\r\n        if (isFunction(className)) {\r\n\r\n            classList = list(className.call(item, index, isElem(item) ? item.classList.value : item))\r\n\r\n        } else {\r\n            classList = list(className)\r\n        }\r\n\r\n        item?.classList?.add(...classList);\r\n    });\r\n}\r\n\r\n","import { fn } from \"../core\";\r\n\r\n\r\nfn.map = function (callback) {\r\n    this.result = this.result.map((element, index, array) => callback.call(element, element, index, array))\r\n    return this;\r\n}\r\n\r\n\r\n","import { fn, domtify } from \"../core\";\r\n\r\n\r\nfn.filter = function (selector) {\r\n\r\n    //默认是选择器\r\n    let callbackFn = item => item?.matches(selector || '*')\r\n\r\n    //函数\r\n    if (typeof selector === 'function') callbackFn = selector\r\n\r\n    //domtify实例\r\n    if (selector instanceof domtify) {\r\n        callbackFn = item => (selector.result).indexOf(item) !== -1;\r\n    }\r\n\r\n    //调用数组原生的filter过滤\r\n    this.result = this.result.filter((item, index, array) => callbackFn.call(item, item, index, array));\r\n\r\n    return this;\r\n\r\n\r\n}\r\n\r\n\r\n","import { fn } from \"../core\";\r\n\r\n\r\nfn.eq = function (index) {\r\n    this.result = [this.result.at(index)];\r\n    return this;\r\n}\r\n\r\n\r\n","import { fn } from \"../core\";\r\n\r\nimport \"./eq\"\r\n\r\nfn.first = function () {\r\n    return this.eq(0)\r\n}\r\n\r\n\r\n","import { fn } from \"../core\";\r\nimport \"./eq\"\r\n\r\nfn.last = function () {\r\n    return this.eq(-1)\r\n}\r\n\r\n\r\n","import { fn } from \"../core\";\r\n\r\n\r\nfn.get = function (index) {\r\n    return Number.isInteger(index) ? this.result.at(index) : this.result;\r\n}\r\n\r\n\r\n","import { Domtify } from \"../core\";\r\n\r\n\r\nconst flatArgs = (args) => {\r\n\r\n    const uniqueMap = new Map();\r\n    return (Array.isArray(args) ? args : [args]).flat(Infinity).flatMap(item => {\r\n\r\n        if (item instanceof Domtify) {\r\n            return item.result\r\n        }\r\n        if (item instanceof NodeList || item instanceof HTMLCollection) {\r\n            return Array.from(item)\r\n        }\r\n        return item;\r\n    }).filter(item => {\r\n        if (item instanceof Element) {//不允许重复的Element\r\n            if (!uniqueMap.has(item)) {\r\n                uniqueMap.set(item, true);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (item === null || typeof item === 'number') {//null也删除\r\n            return false\r\n        }\r\n        return true;\r\n    });\r\n}\r\n\r\nexport default flatArgs","import { fn } from \"../core\";\r\nimport { isString, isHtmlString, isInstance, isFunction, isElem, isInPage, arrUnique } from \"../utils\";\r\nimport flatArgs from \"../utils/flatArgs\";\r\n\r\nimport './each'\r\n\r\nfn.append = function (...args) {\r\n\r\n\r\n    //参数静态化\r\n    let firstParam = args[0];\r\n    let firstParamIsFunction = isFunction(firstParam)\r\n    let fnResult = {};\r\n    this.each((item, index) => {\r\n        if (firstParamIsFunction) {\r\n            fnResult[index] = flatArgs(firstParam.call(item, index, item.textContent))\r\n        }\r\n    })\r\n    Object.freeze(fnResult)//冻结该对象防止被更改\r\n\r\n\r\n\r\n\r\n\r\n    let collection = flatArgs(args);\r\n    let last = false;\r\n    return this.each((elem, index) => {\r\n\r\n        if (firstParamIsFunction) {\r\n            collection = fnResult[index]\r\n        }\r\n\r\n        last = index === this.length - 1 ? true : false;\r\n        collection.forEach(item => {\r\n            //1.字符串\r\n            if (isString(item)) {\r\n                if (isHtmlString(item)) {\r\n                    elem.insertAdjacentHTML('beforeend', item)\r\n                } else {\r\n                    elem.insertAdjacentText('beforeend', item)\r\n                }\r\n            } else if (isElem(item) || item instanceof Text) { //元素\r\n                if (last === true) {//最后一个目标元素\r\n                    elem.appendChild(item)\r\n                } else {\r\n                    elem.appendChild(item.cloneNode(true))\r\n                }\r\n            }\r\n\r\n        })\r\n\r\n    })\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","import { domtify } from \"../core\";\r\n\r\nimport { isPlainObject } from \"../utils\";\r\n\r\n\r\ndomtify.extend = function () {\r\n    let options,\r\n        name,\r\n        src,\r\n        copy,\r\n        copyIsArray,\r\n        clone,\r\n        target = arguments[0] || {}, //第一个参数\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false\r\n\r\n    // 处理深度复制情况\r\n    if (typeof target === 'boolean') {\r\n        deep = target\r\n\r\n        // 跳过布尔值和目标\r\n        target = arguments[i] || {}\r\n        i++\r\n    }\r\n\r\n    // 当目标是字符串或其他东西时处理大小写（可能在深度复制中）\r\n    if (typeof target !== 'object' && typeof target !== 'function') {\r\n        target = {}\r\n    }\r\n\r\n    // 如果只传递一个参数，则扩展jQuery本身\r\n    if (i === length) {\r\n        target = this\r\n        i--\r\n    }\r\n\r\n    for (; i < length; i++) {\r\n        // 仅处理非null/未定义的值\r\n        if ((options = arguments[i]) != null) {\r\n            // 延伸基础对象\r\n            for (name in options) {\r\n                copy = options[name]\r\n                // 防止Object.prototype污染\r\n                // 防止无休止的循环\r\n                if (name === '__proto__' || target === copy) {\r\n                    continue\r\n                }\r\n\r\n                // 如果我们正在合并普通对象或数组，则重复出现\r\n                if (\r\n                    deep &&\r\n                    copy &&\r\n                    (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))\r\n                ) {\r\n                    src = target[name]\r\n\r\n                    // 确保源值的类型正确\r\n                    if (copyIsArray && !Array.isArray(src)) {\r\n                        clone = []\r\n                    } else if (!copyIsArray && !isPlainObject(src)) {\r\n                        clone = {}\r\n                    } else {\r\n                        clone = src\r\n                    }\r\n                    copyIsArray = false\r\n\r\n                    // 从不移动原始对象，而是克隆它们\r\n                    target[name] = this.extend(deep, clone, copy)\r\n\r\n                    // 不要引入未定义的值\r\n                    // } else if (copy !== undefined) {\r\n                } else {\r\n                    target[name] = copy\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 返回修改后的对象\r\n    return target\r\n}\r\n\r\n","import { fn } from \"../core\";\r\nimport './each'\r\n\r\n\r\nfn.clone = function (deep = false) {\r\n    return this.map(item => item?.cloneNode(deep))\r\n}\r\n\r\n","import { fn, domtify } from \"../core\";\r\nimport { arrUnique } from \"../utils\";\r\nimport './each'\r\nimport './get'\r\n\r\n\r\nfn.add = function (selector, context) {\r\n    return domtify(arrUnique([...this.get(), ...domtify(selector, context).get()]))\r\n}\r\n\r\n"],"names":["isElem","el","Element","isPlainObject","obj","Array","prototype","Object","getPrototypeOf","isString","value","isHtmlString","str","trim","startsWith","isFunction","isArray","isInstance","cls","arrUnique","arr","Set","Domtify","length","result","constructor","selector","context","div","document","createElement","insertAdjacentHTML","firstChild","from","querySelectorAll","NodeList","HTMLCollection","fn","domtify","each","callback","forEach","element","index","array","call","addClass","className","list","res","split","classList","item","_item$classList","add","map","filter","callbackFn","matches","indexOf","eq","at","first","last","get","Number","isInteger","flatArgs","args","uniqueMap","Map","flat","Infinity","flatMap","has","set","append","firstParam","firstParamIsFunction","fnResult","textContent","freeze","collection","elem","insertAdjacentText","Text","appendChild","cloneNode","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","deep"],"mappings":"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"}